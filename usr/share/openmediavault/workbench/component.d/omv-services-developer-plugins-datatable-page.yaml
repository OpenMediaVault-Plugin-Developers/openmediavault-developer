version: "1.0"
type: component
data:
  name: omv-services-developer-plugins-datatable-page
  type: datatablePage
  config:
    autoReload: false
    stateId: b317a72d-1804-1632-a31b-1f48f0ea6aae
    sorters:
      - dir: asc
        prop: name
    store:
      proxy:
        service: Developer
        get:
          method: getPluginList
    columns:
      - name: _("Name")
        prop: name
        flexGrow: 1
        sortable: true
      - name: _("Folder Exists")
        prop: exists
      - name: _("Branch")
        prop: branch
        flexGrow: 1
        sortable: true
      - name: _("Version")
        prop: version
        flexGrow: 1
        sortable: true
    actions:
      - type: menu
        icon: mdi:github
        tooltip: _("GitHub")
        actions:
          - text: _("Update all")
            icon: mdi:update
            execute:
              type: taskDialog
              taskDialog:
                config:
                  title: _("Update all plugins from Github ...")
                  startOnInit: true
                  request:
                    service: Developer
                    method: doCommand
                    params:
                      command: "update"
                      plugin: "all"
                successUrl: /services/developer/plugins
          - text: _("Update")
            icon: mdi:update
            execute:
              type: taskDialog
              taskDialog:
                config:
                  title: _("Update from Github")
                  startOnInit: true
                  request:
                    service: Developer
                    method: doCommand
                    params:
                      command: "update"
                      plugin: "{{ _selected[0].name }}"
                  buttons:
                    stop:
                      hidden: true
                successUrl: /services/developer/plugins
          - text: _("Reset")
            icon: mdi:lock-reset
            execute:
              type: taskDialog
              taskDialog:
                config:
                  title: _("Reset ...")
                  startOnInit: true
                  request:
                    service: Developer
                    method: doCommand
                    params:
                      command: "reset"
                      plugin: "{{ _selected[0].name }}"
                  buttons:
                    stop:
                      hidden: true
                successUrl: /services/developer/plugins
      - type: menu
        icon: mdi:package-variant
        tooltip: _("Package")
        actions:
          - text: _("Build")
            icon: mdi:wrench-outline
            execute:
              type: taskDialog
              taskDialog:
                config:
                  title: _("Build ...")
                  startOnInit: true
                  request:
                    service: Developer
                    method: doCommand
                    params:
                      command: "build"
                      plugin: "{{ _selected[0].name }}"
                  buttons:
                    stop:
                      hidden: true
                successUrl: /services/developer/plugins
          - text: _("Install")
            icon: mdi:archive-outline
            execute:
              type: taskDialog
              taskDialog:
                config:
                  title: _("Installing ...")
                  startOnInit: true
                  request:
                    service: Developer
                    method: doCommand
                    params:
                      command: "install"
                      plugin: "{{ _selected[0].name }}"
                  buttons:
                    stop:
                      hidden: true
                successUrl: /services/developer/plugins
      - type: menu
        icon: mdi:translate
        tooltip: _("Transifex")
        actions:
          - text: _("Build")
            icon: mdi:wrench-outline
            execute:
              type: taskDialog
              taskDialog:
                config:
                  title: _("Building locale file ...")
                  startOnInit: true
                  request:
                    service: Developer
                    method: doCommand
                    params:
                      command: "buildpot"
                      plugin: "{{ _selected[0].name }}"
                  buttons:
                    stop:
                      hidden: true
                successUrl: /services/developer/plugins
          - text: _("Push")
            icon: mdi:source-commit
            execute:
              type: taskDialog
              taskDialog:
                config:
                  title: _("Pushing locale file to Transifex ...")
                  startOnInit: true
                  request:
                    service: Developer
                    method: doCommand
                    params:
                      command: "pushpot"
                      plugin: "{{ _selected[0].name }}"
                  buttons:
                    stop:
                      hidden: true
                successUrl: /services/developer/plugins
          - text: _("Pull")
            icon: mdi:source-pull
            execute:
              type: taskDialog
              taskDialog:
                config:
                  title: _("Pulling locale files from Transifex ...")
                  startOnInit: true
                  request:
                    service: Developer
                    method: doCommand
                    params:
                      command: "pullpo"
                      plugin: "{{ _selected[0].name }}"
                  buttons:
                    stop:
                      hidden: true
                successUrl: /services/developer/plugins
      - type: menu
        icon: mdi:git
        tooltip: _("Git")
        actions:
          - text: _("Add")
            icon: mdi:source-branch-plus
            execute:
              type: taskDialog
              taskDialog:
                config:
                  title: _("Adding all files to commit ...")
                  startOnInit: true
                  request:
                    service: Developer
                    method: doCommand
                    params:
                      command: "add"
                      plugin: "{{ _selected[0].name }}"
                      commit: ""
                      tag: ""
                      message: ""
                  buttons:
                    stop:
                      hidden: true
                successUrl: /services/developer/plugins
          - text: _("Commit")
            icon: mdi:source-commit
            execute:
              type: request
              request:
                service: Developer
                method: doCommand
                params:
                  command: "commit"
                  plugin: "{{ _selected[0].name }}"
                  commit: ""
                  tag: ""
                  message: ""
                task: true
          - text: _("Push")
            icon: mdi:source-merge
            execute:
              type: taskDialog
              taskDialog:
                config:
                  title: _("Pushing to Github ...")
                  startOnInit: true
                  request:
                    service: Developer
                    method: doCommand
                    params:
                      command: "push"
                      plugin: "{{ _selected[0].name }}"
                      commit: ""
                      tag: ""
                      message: ""
                  buttons:
                    stop:
                      hidden: true
                successUrl: /services/developer/plugins
      - type: menu
        icon: mdi:note-multiple-outline
        tooltip: _("Changelog")
        actions:
          - text: _("dch -i")
            icon: mdi:playlist-plus
            execute:
              type: request
              request:
                service: Developer
                method: doCommand
                params:
                  command: "dchi"
                  plugin: "{{ _selected[0].name }}"
                  commit: ""
                task: true
          - text: _("dch -a")
            icon: mdi:playlist-edit
            execute:
              type: request
              request:
                service: Developer
                method: doCommand
                params:
                  command: "dcha"
                  plugin: "{{ _selected[0].name }}"
                  commit: ""
                task: true
          - text: _("dch -r")
            icon: mdi:playlist-check
            execute:
              type: request
              request:
                service: Developer
                method: doCommand
                params:
                  command: "dchr"
                  plugin: "{{ _selected[0].name }}"
                  commit: ""
                task: true
